{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Varshil/Google%20Drive/It-Vedant/ComunityHere/Community/lib/auth-context.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport type React from \"react\"\r\nimport { createContext, useContext, useState, useEffect } from \"react\"\r\nimport { useSession, signOut as nextAuthSignOut } from \"next-auth/react\"\r\n\r\nexport interface User {\r\n  id: string\r\n  name: string\r\n  email: string\r\n  college?: string\r\n  department?: string\r\n  avatar: string\r\n  bio: string\r\n  joinedDate: string\r\n  role: \"student\" | \"committee_admin\"\r\n  committee?: string // For committee admins\r\n  sessionId?: string // Session ID for student login\r\n}\r\n\r\nexport interface AuthContextType {\r\n  user: User | null\r\n  isLoading: boolean\r\n  login: (email: string, password: string, collegeOrCommittee: string) => Promise<void>\r\n  signup: (\r\n    name: string,\r\n    email: string,\r\n    password: string,\r\n    collegeOrCommittee: string,\r\n    departmentOrRole: string,\r\n    role: \"student\" | \"committee_admin\",\r\n  ) => Promise<void>\r\n  logout: () => void\r\n}\r\n\r\nconst AuthContext = createContext<AuthContextType | undefined>(undefined)\r\n\r\nexport function AuthProvider({ children }: { children: React.ReactNode }) {\r\n  const { data: session, status, update } = useSession()\r\n  const [user, setUser] = useState<User | null>(null)\r\n  const [isLoading, setIsLoading] = useState(true)\r\n\r\n  // Expose update function to refresh session\r\n  useEffect(() => {\r\n    // Store update function globally so it can be called from login\r\n    if (typeof window !== \"undefined\") {\r\n      (window as any).__refreshAuthSession = update\r\n    }\r\n  }, [update])\r\n\r\n  // Sync NextAuth session with AuthContext\r\n  useEffect(() => {\r\n    if (status === \"loading\") {\r\n      setIsLoading(true)\r\n      return\r\n    }\r\n\r\n    if (status === \"authenticated\" && session?.user) {\r\n      // Convert NextAuth session to User format\r\n      const sessionUser = session.user as any\r\n      const authUser: User = {\r\n        id: sessionUser.id || sessionUser.email || \"\",\r\n        name: sessionUser.name || \"\",\r\n        email: sessionUser.email || \"\",\r\n        college: sessionUser.college,\r\n        department: sessionUser.department,\r\n        avatar: sessionUser.image || `https://api.dicebear.com/7.x/avataaars/svg?seed=${sessionUser.email}`,\r\n        bio: sessionUser.role === \"committee_admin\" ? \"Committee Administrator\" : \"Member of the community\",\r\n        joinedDate: new Date().toISOString(),\r\n        role: sessionUser.role || \"student\",\r\n        committee: sessionUser.committee,\r\n        sessionId: sessionUser.sessionId,\r\n      }\r\n      setUser(authUser)\r\n      // Also store in localStorage for backward compatibility\r\n      localStorage.setItem(\"currentUser\", JSON.stringify(authUser))\r\n    } else if (status === \"unauthenticated\") {\r\n      // Check localStorage as fallback\r\n      const storedUser = localStorage.getItem(\"currentUser\")\r\n      if (storedUser) {\r\n        try {\r\n          setUser(JSON.parse(storedUser))\r\n        } catch (e) {\r\n          localStorage.removeItem(\"currentUser\")\r\n          setUser(null)\r\n        }\r\n      } else {\r\n        setUser(null)\r\n      }\r\n    }\r\n    setIsLoading(false)\r\n  }, [session, status])\r\n\r\n  const login = async (email: string, password: string, collegeOrCommittee: string) => {\r\n    setIsLoading(true)\r\n    await new Promise((resolve) => setTimeout(resolve, 500))\r\n\r\n    const role = email.includes(\"committee\") ? \"committee_admin\" : \"student\"\r\n\r\n    const mockUser: User = {\r\n      id: `user-${Date.now()}`,\r\n      name: email.split(\"@\")[0],\r\n      email,\r\n      ...(role === \"student\"\r\n        ? { college: collegeOrCommittee, department: \"Computer Science\" }\r\n        : { committee: collegeOrCommittee }),\r\n      avatar: `https://api.dicebear.com/7.x/avataaars/svg?seed=${email}`,\r\n      bio: role === \"committee_admin\" ? \"Committee Administrator\" : \"Passionate about tech and community\",\r\n      joinedDate: new Date().toISOString(),\r\n      role,\r\n    }\r\n\r\n    setUser(mockUser)\r\n    localStorage.setItem(\"currentUser\", JSON.stringify(mockUser))\r\n    setIsLoading(false)\r\n  }\r\n\r\n  const signup = async (\r\n    name: string,\r\n    email: string,\r\n    password: string,\r\n    collegeOrCommittee: string,\r\n    departmentOrRole: string,\r\n    role: \"student\" | \"committee_admin\",\r\n  ) => {\r\n    setIsLoading(true)\r\n    await new Promise((resolve) => setTimeout(resolve, 500))\r\n\r\n    const mockUser: User = {\r\n      id: `user-${Date.now()}`,\r\n      name,\r\n      email,\r\n      ...(role === \"student\"\r\n        ? { college: collegeOrCommittee, department: departmentOrRole }\r\n        : { committee: collegeOrCommittee }),\r\n      avatar: `https://api.dicebear.com/7.x/avataaars/svg?seed=${email}`,\r\n      bio: role === \"committee_admin\" ? \"Committee Administrator\" : \"New member of the community\",\r\n      joinedDate: new Date().toISOString(),\r\n      role,\r\n    }\r\n\r\n    setUser(mockUser)\r\n    localStorage.setItem(\"currentUser\", JSON.stringify(mockUser))\r\n    setIsLoading(false)\r\n  }\r\n\r\n  const logout = async () => {\r\n    setUser(null)\r\n    localStorage.removeItem(\"currentUser\")\r\n    // Also sign out from NextAuth\r\n    await nextAuthSignOut({ redirect: false })\r\n  }\r\n\r\n  return <AuthContext.Provider value={{ user, isLoading, login, signup, logout }}>{children}</AuthContext.Provider>\r\n}\r\n\r\nexport function useAuth() {\r\n  const context = useContext(AuthContext)\r\n  if (context === undefined) {\r\n    throw new Error(\"useAuth must be used within an AuthProvider\")\r\n  }\r\n  return context\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 173, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Varshil/Google%20Drive/It-Vedant/ComunityHere/Community/components/navigation.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport Link from \"next/link\"\r\nimport { useState } from \"react\"\r\nimport { Menu, X, LogOut, User } from \"lucide-react\"\r\nimport { useAuth } from \"@/lib/auth-context\"\r\n\r\nexport default function Navigation() {\r\n  const [isOpen, setIsOpen] = useState(false)\r\n  const { user, logout } = useAuth()\r\n\r\n  const studentLinks = [\r\n    { href: \"/\", label: \"Home\" },\r\n    { href: \"/events\", label: \"Events\" },\r\n    { href: \"/polls\", label: \"Polls\" },\r\n    { href: \"/leaderboard\", label: \"Leaderboard\" },\r\n    { href: \"/recruitment\", label: \"Recruitment\" },\r\n    { href: \"/discussions\", label: \"Discussions\" },\r\n    { href: \"/contact\", label: \"Contact\" },\r\n  ]\r\n\r\n  const adminLinks = [\r\n    { href: \"/admin/dashboard\", label: \"Admin Dashboard\" },\r\n    { href: \"/\", label: \"View Student Site\" },\r\n  ]\r\n\r\n  const links = user?.role === \"committee_admin\" ? adminLinks : studentLinks\r\n\r\n  return (\r\n    <nav className=\"sticky top-0 z-50 bg-white border-b border-gray-200 shadow-sm\">\r\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\r\n        <div className=\"flex justify-between items-center h-16\">\r\n          <Link href={user?.role === \"committee_admin\" ? \"/admin/dashboard\" : \"/\"} className=\"flex items-center gap-2\">\r\n            <div className=\"w-8 h-8 gradient-primary rounded-lg flex items-center justify-center text-white font-bold\">\r\n              CH\r\n            </div>\r\n            <span className=\"font-bold text-lg hidden sm:inline\">CommunityHere</span>\r\n          </Link>\r\n\r\n          {/* Desktop Menu */}\r\n          <div className=\"hidden md:flex gap-8 items-center\">\r\n            {links.map((link) => (\r\n              <Link\r\n                key={link.href}\r\n                href={link.href}\r\n                className=\"text-gray-600 hover:text-teal-600 transition-colors font-medium\"\r\n              >\r\n                {link.label}\r\n              </Link>\r\n            ))}\r\n            {user ? (\r\n              <div className=\"flex items-center gap-4\">\r\n                <div className=\"flex items-center gap-2\">\r\n                  <img src={user.avatar || \"/placeholder.svg\"} alt={user.name} className=\"w-8 h-8 rounded-full\" />\r\n                  <div className=\"text-sm\">\r\n                    <p className=\"font-medium text-gray-900\">{user.name}</p>\r\n                    <p className=\"text-xs text-gray-500\">\r\n                      {user.role === \"committee_admin\" ? user.committee : user.college}\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n                <button\r\n                  onClick={logout}\r\n                  className=\"text-gray-600 hover:text-red-600 transition-colors flex items-center gap-1\"\r\n                >\r\n                  <LogOut size={18} />\r\n                </button>\r\n              </div>\r\n            ) : (\r\n              <div className=\"flex gap-2\">\r\n                <Link\r\n                  href=\"/login\"\r\n                  className=\"px-4 py-2 text-teal-600 border border-teal-600 rounded-lg font-medium hover:bg-teal-50 transition-colors\"\r\n                >\r\n                  Student Login\r\n                </Link>\r\n                <Link\r\n                  href=\"/committee-login\"\r\n                  className=\"gradient-primary text-white px-4 py-2 rounded-lg font-medium hover:shadow-lg transition-shadow\"\r\n                >\r\n                  Committee Admin\r\n                </Link>\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          {/* Mobile Menu Button */}\r\n          <button className=\"md:hidden\" onClick={() => setIsOpen(!isOpen)}>\r\n            {isOpen ? <X size={24} /> : <Menu size={24} />}\r\n          </button>\r\n        </div>\r\n\r\n        {/* Mobile Menu */}\r\n        {isOpen && (\r\n          <div className=\"md:hidden pb-4 space-y-2\">\r\n            {links.map((link) => (\r\n              <Link\r\n                key={link.href}\r\n                href={link.href}\r\n                className=\"block px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg\"\r\n                onClick={() => setIsOpen(false)}\r\n              >\r\n                {link.label}\r\n              </Link>\r\n            ))}\r\n            {user ? (\r\n              <>\r\n                <Link\r\n                  href=\"/profile\"\r\n                  className=\"block px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg flex items-center gap-2\"\r\n                  onClick={() => setIsOpen(false)}\r\n                >\r\n                  <User size={18} />\r\n                  Profile\r\n                </Link>\r\n                <button\r\n                  onClick={() => {\r\n                    logout()\r\n                    setIsOpen(false)\r\n                  }}\r\n                  className=\"w-full text-left px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg flex items-center gap-2\"\r\n                >\r\n                  <LogOut size={18} />\r\n                  Logout\r\n                </button>\r\n              </>\r\n            ) : (\r\n              <>\r\n                <Link\r\n                  href=\"/login\"\r\n                  className=\"block px-4 py-2 text-teal-600 border border-teal-600 rounded-lg font-medium text-center hover:bg-teal-50\"\r\n                  onClick={() => setIsOpen(false)}\r\n                >\r\n                  Student Login\r\n                </Link>\r\n                <Link\r\n                  href=\"/committee-login\"\r\n                  className=\"block px-4 py-2 gradient-primary text-white rounded-lg font-medium text-center\"\r\n                  onClick={() => setIsOpen(false)}\r\n                >\r\n                  Committee Admin\r\n                </Link>\r\n              </>\r\n            )}\r\n          </div>\r\n        )}\r\n      </div>\r\n    </nav>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 522, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Varshil/Google%20Drive/It-Vedant/ComunityHere/Community/components/providers.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport { SessionProvider } from \"next-auth/react\"\r\nimport { AuthProvider } from \"@/lib/auth-context\"\r\n\r\nexport function Providers({ children }: { children: React.ReactNode }) {\r\n  return (\r\n    <SessionProvider>\r\n      <AuthProvider>\r\n        {children}\r\n      </AuthProvider>\r\n    </SessionProvider>\r\n  )\r\n}\r\n\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAHA;;;;AAKO,SAAS,UAAU,EAAE,QAAQ,EAAiC;IACnE,qBACE,0XAAC,8UAAe;kBACd,cAAA,0XAAC,wMAAY;sBACV;;;;;;;;;;;AAIT;KARgB","debugId":null}}]
}